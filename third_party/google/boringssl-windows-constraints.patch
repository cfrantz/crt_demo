diff --git a/BUILD b/BUILD
index 65e0cdc2e..3c9a12341 100644
--- a/BUILD
+++ b/BUILD
@@ -56,7 +56,10 @@ config_setting(
 
 config_setting(
     name = "windows_x86_64",
-    values = {"cpu": "x64_windows"},
+    constraint_values = [
+        "@platforms//cpu:x86_64",
+        "@platforms//os:windows",
+    ],
 )
 
 config_setting(
diff --git a/src/util/BUILD.toplevel b/src/util/BUILD.toplevel
index 65e0cdc2e..3c9a12341 100644
--- a/src/util/BUILD.toplevel
+++ b/src/util/BUILD.toplevel
@@ -56,7 +56,10 @@ config_setting(
 
 config_setting(
     name = "windows_x86_64",
-    values = {"cpu": "x64_windows"},
+    constraint_values = [
+        "@platforms//cpu:x86_64",
+        "@platforms//os:windows",
+    ],
 )
 
 config_setting(
